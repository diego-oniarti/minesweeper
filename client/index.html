<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1v1 minesweeper</title>
</head>
<body>
    <h1>1v1 Minesweeper</h1>
    <!-- <p><a id="link" href="#"></a></p> -->
    <table>
        <tr>
            <td>
                <fieldset style="float: left;">
                    <legend>Relax</legend>
                    <form action="./game.html" method="get" onsubmit="return invioRelax(this)">
                        <label for="key">Game Key</label>
                        <input type="text" name="key">
                        <br><br>
                        <input type="submit" value="Join">
            
                    </form>
                </fieldset>
            </td>
        </tr>
        <tr>
            <td>
                <fieldset style="float: left;">
                    <legend>Rush</legend>
                    <form action="./rush.html" method="get" onsubmit="return invioRush(this)">
                        <table>
                            <tr>
                                <td><label for="key">Game Key</label></td>
                                <td><input type="text" name="key"></td>
                            </tr>
                            <tr>
                                <td><label for="tempo">Tempo</label></td>
                                <td><input type="number" name="tempo" value="3" min="0.01" step="0.01"></td>
                            </tr>
                        </table>
                        <input type="submit" value="Join">
                    </form>
                </fieldset>
            </td>
            <td>
                <fieldset style="float: left;">
                    <legend>Rush Singleplayer</legend>
                    <form action="./rushSingle.html" method="get" onsubmit="return invioRush(this)">
                        <table>
                            <tr>
                                <td><label for="tempo">Tempo</label></td>
                                <td><input type="number" name="tempo" value="3" min="0.01" step="0.01"></td>
                            </tr>
                        </table>
                        <input type="submit" value="Join">
                    </form>
                </fieldset>
            </td>
        </tr>
    </table>


    <script>
        const caratteri = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"
        let key = "";
        for (let i=0; i<8; i++){
            key += caratteri.charAt(Math.floor(Math.random()*caratteri.length));
        }

        function invioRelax(form){
            if (form.key.value.match(/^\s*$/))
                form.key.value = key
            return !form.key.value.match(/^\s*$/);
        }
        function invioRush(form){
            if (form.key.value.match(/^\s*$/))
                form.key.value = key
            if (form.tempo.value <= 0 || !form.tempo.value  || form.tempo.value=='')
                form.tempo.value = 3
            return !form.key.value.match(/^\s*$/);
        }
    </script>
</body>
</html>